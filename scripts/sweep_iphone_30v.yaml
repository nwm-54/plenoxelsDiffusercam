program: train_sim_multiviews.py
method: bayes
name: sweep_iphone_30v
metric:
  name: psnr/full test camera
  goal: maximize

parameters:
  # Fixed dataset configuration
  source_path:
    value: "/home/wl757/multiplexed-pixels/plenoxels/blender_data/lego_gen12"
  use_iphone:
    value: true
  resolution:
    value: 1
  camera_offset:
    value: 0
  n_train_images:
    values: [30]
  skip_camera_profile:
    value: true

  # ===== Learning Rates =====
  position_lr_init:
    distribution: log_uniform_values
    min: 1e-4
    max: 1e-1
  position_lr_final:
    distribution: log_uniform_values
    min: 1e-06
    max: 1e-03
  opacity_lr:
    distribution: log_uniform_values
    min: 1e-3
    max: 1e-1
  scaling_lr:
    distribution: log_uniform_values
    min: 1e-4
    max: 1e-1
  rotation_lr:
    distribution: log_uniform_values
    min: 1e-5
    max: 1e-2
  feature_lr:
    distribution: log_uniform_values
    min: 1e-3
    max: 1e-1

  # ===== Densification Parameters =====
  # Gradient threshold for densification (critical for quality)
  densify_grad_threshold:
    distribution: log_uniform_values
    min: 2e-05
    max: 5e-03
  densification_interval:
    distribution: int_uniform
    min: 20
    max: 120
  densify_from_iter:
    distribution: int_uniform
    min: 50
    max: 500
  densify_until_iter:
    distribution: int_uniform
    min: 1000
    max: 3000
  percent_dense:
    distribution: uniform
    min: 0.01
    max: 0.1

  # ===== Regularization Parameters =====
  lambda_dssim:
    distribution: uniform
    min: 0.05
    max: 0.4
  tv_weight:
    distribution: log_uniform_values
    min: 0.00001
    max: 0.01
  tv_unseen_weight:
    distribution: log_uniform_values
    min: 0.00001
    max: 0.01

  # ===== Opacity Management =====
  opacity_reset_interval:
    distribution: int_uniform
    min: 1000
    max: 2500

  # ===== Training Configuration =====
  iterations:
    value: 3000

  # ===== WandB Image Logging (minimal to save storage) =====
  wandb_max_images:
    value: 1
  wandb_image_interval:
    value: 0  # Only log at final iteration

  # Output identifier for organization
  output-id:
    value: '14'

command:
  - ${interpreter}
  - ${program}
  - ${args_no_boolean_flags}
